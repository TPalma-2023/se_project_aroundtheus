!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeButton()})),this._element.querySelector(".card__remove-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._element.remove(),this._element=null}getView(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._element}}class t{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_setEventListeners(){const e=[...this._form.querySelectorAll(this._inputSelector)],t=this._form.querySelector(this._submitButtonSelector);e.forEach((s=>{s.addEventListener("input",(n=>{this._checkInputValidity(s),this._toggleButtonState(e,t,this._inactiveButtonClass)}))}))}_toggleButtonState(e,t,s){this._hasInvalidInput(e)?this._disableSubmitButton():(t.classList.remove(s),t.disabled=!1)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_disableSubmitButton(){const e=this._form.querySelector(this._submitButtonSelector);e.classList.add(this._inactiveButtonClass),e.disabled=!0}}class s{constructor(e){this._modalElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_clickToCloseOpenedModal(e){(e.target.classList.contains("modal__button-close")||e.target.classList.contains("modal_opened"))&&this.close()}setEventListeners(){this._modalElement.addEventListener("mousedown",(e=>{this._clickToCloseOpenedModal(e)}))}}class n extends s{constructor(e,t){super(e),this._modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputEls=[...this._modalForm.querySelectorAll(".modal__input")],this._inputValues={}}close(){this._modalForm.reset(),super.close()}_getInputValues(){return this._inputEls.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector("#profile-edit-modal"),i=document.querySelector("#add-card-modal"),l=document.querySelector("#image-modal"),a=document.querySelector(".profile__edit-button"),c=(r.querySelector(".modal__button-close"),i.querySelector(".modal__button-close"),l.querySelector(".modal__button-close"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),r.querySelector(".modal__form"),i.querySelector(".modal__form")),d=document.querySelector("#profile-title-input"),u=(c.querySelector(".modal__input_type_title"),c.querySelector(".modal__input_type_url"),document.querySelector("#profile-description-input")),_=(document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list"),document.querySelector(".profile__add-button")),m=new class{constructor(e,t){this._userNameEl=document.querySelector(e),this._userJobEl=document.querySelector(t)}getUserInfo(){return{name:this._userNameEl.textContent,description:this._userJobEl.textContent}}setUserInfo(e){this._userNameEl.textContent=e.title,this._userJobEl.textContent=e.description}}(".profile__title",".profile__description"),h=new class extends s{constructor(e){super(e),this._modalImage=document.querySelector(".modal__image"),this._modalImageDescription=document.querySelector(".modal__caption"),this.setEventListeners()}open(e){this._modalImage.src=e.link,this._modalImage.alt=e.name,this._modalImageDescription.textContent=e.name,super.open()}}("#image-modal");h.setEventListeners();const p=new class{constructor(e,t){let{renderer:s,items:n}=e;this._renderer=s,this._items=n.filter((e=>void 0!==e)),this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);t&&this._container.append(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=S(e);p.addItem(t)}},".cards__list");p.renderItems(),new t(o,r).enableValidation();const E=new t(o,i);function S(t){return new e(t,"#card-template",v).getView()}function v(e){h.open(e)}E.enableValidation(),a.addEventListener("click",(()=>{const e=m.getUserInfo();d.value=e.name,u.value=e.description,y.open()})),_.addEventListener("click",(()=>{E._disableSubmitButton(),f.open()}));const y=new n("#profile-edit-modal",(function(e){m.setUserInfo(e),y.close()}));y.setEventListeners();const f=new n("#add-card-modal",(function(e){const t=e.title,s=e.url;if(t&&s){const e=S({name:t,link:s});p.addItem(e)}}));f.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEksS0FDL0JrRyxFQUF3QlgsTUFBUStDLEVBQUszQixZQUNyQzRCLEVBQWNuRSxNQUFNLElBR3RCK0IsRUFBaUJ2RixpQkFBaUIsU0FBUyxLQUN6Q3dILEVBQWlCekUsdUJBQ2pCNkUsRUFBa0JwRSxNQUFNLElBaUMxQixNQUFNbUUsRUFBZ0IsSUFBSTFELEVBQ3hCLHVCQXpCRixTQUFpQ2xGLEdBQy9CMEcsRUFBU08sWUFBWWpILEdBQ3JCNEksRUFBY2xFLE9BQ2hCLElBeUJBa0UsRUFBYzNELG9CQUVkLE1BQU00RCxFQUFvQixJQUFJM0QsRUFDNUIsbUJBdEJGLFNBQTZCbEYsR0FDM0IsTUFBTUssRUFBT0wsRUFBS2tILE1BQ1ozRyxFQUFPUCxFQUFLOEksSUFDbEIsR0FBSXpJLEdBQVFFLEVBQU0sQ0FDaEIsTUFLTXdJLEVBQVlQLEVBTEYsQ0FDZG5JLEtBQU1BLEVBQ05FLEtBQU1BLElBS1IrRyxFQUFRYyxRQUFRVyxFQUNsQixDQUNGLElBWUFGLEVBQWtCNUQsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19yZW1vdmUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2VsZWN0b3JzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gIWlucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGlucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIGlucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXG4gICAgICAgICAgaW5wdXRFbHMsXG4gICAgICAgICAgc3VibWl0QnV0dG9uLFxuICAgICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3NcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgX2J1dHRvbkVsZW1lbnQsIF9pbmFjdGl2ZUJ1dHRvbkNsYXNzKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfY2xpY2tUb0Nsb3NlT3BlbmVkTW9kYWwoZXZ0KSB7XG4gICAgaWYgKFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fYnV0dG9uLWNsb3NlXCIpIHx8XG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIHRoaXMuX2NsaWNrVG9DbG9zZU9wZW5lZE1vZGFsKGV2dCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fbW9kYWxGb3JtID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dEVsLm5hbWVdID0gaW5wdXRFbC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBvcGVuUG9wdXAsIGNsb3NlUG9wdXAgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vLyBWYXJpYWJsZXNcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBtb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fYnV0dG9uLWNsb3NlXCJcbik7XG5jb25zdCBhZGRDYXJkQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uLWNsb3NlXCIpO1xuY29uc3QgbW9kYWxJbWFnZUNsb3NlQnV0dG9uID0gbW9kYWxJbWFnZS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b24tY2xvc2VcIik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBjYXJkQWRkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBjYXJkQWRkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIlxuKTtcbmNvbnN0IGNhcmRVcmxJbnB1dCA9IGNhcmRBZGRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3VybFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuLy8gSW5pdGlhbGl6ZSBjb21wb25lbnRzXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX190aXRsZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgbW9kYWxQcmV2aWV3SW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtbW9kYWxcIik7XG5tb2RhbFByZXZpZXdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSByZW5kZXJDYXJkKGl0ZW0pO1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlRWRpdE1vZGFsKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkTW9kYWwpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vIEV2ZW50IGxpc3RlbmVyc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgdXNlciA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlci5uYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXIuZGVzY3JpcHRpb247XG4gIG1vZGFsRWRpdEZvcm0ub3BlbigpO1xufSk7XG5cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICBhZGRDYXJkSW1hZ2VNb2RhbC5vcGVuKCk7XG59KTtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG5cbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBtb2RhbEVkaXRGb3JtLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBtb2RhbFByZXZpZXdJbWFnZS5vcGVuKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGRhdGEpIHtcbiAgY29uc3QgbmFtZSA9IGRhdGEudGl0bGU7XG4gIGNvbnN0IGxpbmsgPSBkYXRhLnVybDtcbiAgaWYgKG5hbWUgJiYgbGluaykge1xuICAgIGNvbnN0IG5ld0NhcmQgPSB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgbGluazogbGluayxcbiAgICB9O1xuXG4gICAgY29uc3QgbmV3Q2FyZEVsID0gcmVuZGVyQ2FyZChuZXdDYXJkKTtcblxuICAgIHNlY3Rpb24uYWRkSXRlbShuZXdDYXJkRWwpO1xuICB9XG59XG5cbmNvbnN0IG1vZGFsRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0XG4pO1xubW9kYWxFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRDYXJkSW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVBZGRDYXJkU3VibWl0XG4pO1xuYWRkQ2FyZEltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckRlc2NyaXB0aW9uU2VsZWN0b3IpIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJEZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3VzZXJKb2JFbC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX3VzZXJKb2JFbC50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9tb2RhbEltYWdlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX21vZGFsSW1hZ2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGl0ZW1zIH0sIGNvbnRhaW5lcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gIT09IHVuZGVmaW5lZCk7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgaXRlbUVsID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICBpZiAoaXRlbUVsKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoaXRlbUVsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFZpZXciLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwic2VsZWN0b3JzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJldmVyeSIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsInN1Ym1pdEJ1dHRvbiIsImZvckVhY2giLCJlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiX2NsaWNrVG9DbG9zZU9wZW5lZE1vZGFsIiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJwb3B1cFNlbGVjdG9yIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX21vZGFsRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0RWxzIiwiX2lucHV0VmFsdWVzIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiaW5wdXQiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0TW9kYWwiLCJhZGRDYXJkTW9kYWwiLCJtb2RhbEltYWdlIiwicHJvZmlsZUVkaXRCdXR0b24iLCJjYXJkQWRkRm9ybUVsZW1lbnQiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImZpcnN0RWxlbWVudENoaWxkIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfdXNlck5hbWVFbCIsIl91c2VySm9iRWwiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJ0aXRsZSIsIm1vZGFsUHJldmlld0ltYWdlIiwiX21vZGFsSW1hZ2UiLCJfbW9kYWxJbWFnZURlc2NyaXB0aW9uIiwic2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXIiLCJyZW5kZXJlciIsIml0ZW1zIiwiX3JlbmRlcmVyIiwiX2l0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsInVuZGVmaW5lZCIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1FbCIsImFwcGVuZCIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmRFbGVtZW50IiwicmVuZGVyQ2FyZCIsImFkZEZvcm1WYWxpZGF0b3IiLCJjYXJkRGF0YSIsInVzZXIiLCJtb2RhbEVkaXRGb3JtIiwiYWRkQ2FyZEltYWdlTW9kYWwiLCJ1cmwiLCJuZXdDYXJkRWwiXSwic291cmNlUm9vdCI6IiJ9